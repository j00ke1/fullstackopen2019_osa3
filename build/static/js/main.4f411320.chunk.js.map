{"version":3,"sources":["components/Filterform.js","components/NewPersonForm.js","components/Person.js","components/Personlist.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Filterform","handleFilterChange","filter","onChange","value","NewPersonForm","addPerson","newName","newNumber","handleNameChange","handleNumberChange","onSubmit","required","type","Person","person","removePerson","name","number","onClick","id","Personlist","persons","filteredPersons","map","key","Notification","message","messageStyle","style","baseUrl","axios","get","newObject","post","put","delete","App","useState","setPersons","setFilter","setFilteredPersons","setNewName","setNewNumber","setMessage","setMessageStyle","errorStyle","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","successStyle","useEffect","personService","then","res","data","catch","err","console","log","toLowerCase","includes","clearFields","e","target","preventDefault","newPerson","existingPerson","find","p","updatedPerson","window","confirm","setTimeout","status","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4f411320.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filterform = ({ handleFilterChange, filter }) => {\r\n  return (\r\n    <div>\r\n      Filter by name: <input onChange={handleFilterChange} value={filter} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filterform;\r\n","import React from 'react';\r\n\r\nconst NewPersonForm = ({\r\n  addPerson,\r\n  newName,\r\n  newNumber,\r\n  handleNameChange,\r\n  handleNumberChange\r\n}) => {\r\n  return (\r\n    <div>\r\n      <h3>Add new</h3>\r\n      <form onSubmit={addPerson}>\r\n        <div>\r\n          Name: <input onChange={handleNameChange} value={newName} required />\r\n          <br />\r\n          Number:{' '}\r\n          <input onChange={handleNumberChange} value={newNumber} required />\r\n        </div>\r\n        <div>\r\n          <button type='submit'>Add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewPersonForm;\r\n","import React from 'react';\r\n\r\nconst Person = ({ person, removePerson }) => {\r\n  return (\r\n    <div>\r\n      {person.name} {person.number}{' '}\r\n      <button onClick={removePerson} value={person.id}>\r\n        Delete\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Person;\r\n","import React from 'react';\r\nimport Person from './Person';\r\n\r\nconst Personlist = ({ persons, filter, filteredPersons, removePerson }) => {\r\n  const phoneBookRows = () => {\r\n    if (filter) {\r\n      return filteredPersons.map(person => (\r\n        <Person key={person.id} person={person} removePerson={removePerson} />\r\n      ));\r\n    }\r\n    return persons.map(person => (\r\n      <Person key={person.id} person={person} removePerson={removePerson} />\r\n    ));\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h3>Numbers</h3>\r\n      <div>{phoneBookRows()}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Personlist;\r\n","import React from 'react';\r\n\r\nconst Notification = ({ message, messageStyle }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div style={messageStyle}>{message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import axios from 'axios';\r\nconst baseUrl = '/api/persons/';\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl);\r\n};\r\n\r\nconst create = newObject => {\r\n  return axios.post(baseUrl, newObject);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  return axios.put(`${baseUrl}${id}`, newObject);\r\n};\r\n\r\nconst remove = id => {\r\n  return axios.delete(`${baseUrl}${id}`);\r\n};\r\n\r\nexport default {\r\n  getAll,\r\n  create,\r\n  update,\r\n  remove\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nimport Filterform from './components/Filterform';\r\nimport NewPersonForm from './components/NewPersonForm';\r\nimport Personlist from './components/Personlist';\r\nimport Notification from './components/Notification';\r\n\r\nimport personService from './services/persons';\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [filter, setFilter] = useState('');\r\n  const [filteredPersons, setFilteredPersons] = useState([]);\r\n  const [newName, setNewName] = useState('');\r\n  const [newNumber, setNewNumber] = useState('');\r\n  const [message, setMessage] = useState('');\r\n  const [messageStyle, setMessageStyle] = useState({});\r\n\r\n  const errorStyle = {\r\n    color: 'red',\r\n    background: 'lightgrey',\r\n    fontSize: 20,\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10\r\n  };\r\n\r\n  const successStyle = {\r\n    color: 'green',\r\n    background: 'lightgrey',\r\n    fontSize: 20,\r\n    borderStyle: 'solid',\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10\r\n  };\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(res => {\r\n        setPersons(res.data);\r\n      })\r\n      .catch(err => console.log(err));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setFilteredPersons(\r\n      persons.filter(person =>\r\n        person.name.toLowerCase().includes(filter.toLowerCase())\r\n      )\r\n    );\r\n  }, [filter, persons]);\r\n\r\n  const handleFilterChange = e => {\r\n    setFilter(e.target.value);\r\n  };\r\n\r\n  const handleNameChange = e => {\r\n    setNewName(e.target.value);\r\n  };\r\n\r\n  const handleNumberChange = e => {\r\n    setNewNumber(e.target.value);\r\n  };\r\n\r\n  const clearFields = () => {\r\n    setNewName('');\r\n    setNewNumber('');\r\n  };\r\n\r\n  const addPerson = e => {\r\n    e.preventDefault();\r\n\r\n    const newPerson = {\r\n      name: newName,\r\n      number: newNumber\r\n    };\r\n    const allNames = persons.map(person => person.name);\r\n\r\n    if (allNames.includes(newName)) {\r\n      const existingPerson = persons.find(p => p.name === newName);\r\n      const updatedPerson = { ...newPerson, number: newNumber };\r\n      if (\r\n        window.confirm(\r\n          `${newName} already exists. Replace the old number with a new one?`\r\n        )\r\n      ) {\r\n        personService\r\n          .update(existingPerson.id, updatedPerson)\r\n          .then(res => {\r\n            setPersons(\r\n              persons.map(person =>\r\n                person.id !== existingPerson.id ? person : res.data\r\n              )\r\n            );\r\n            clearFields();\r\n            setMessage(`Updated the number of ${newName} to ${newNumber}`);\r\n            setMessageStyle(successStyle);\r\n            setTimeout(() => {\r\n              setMessage(null);\r\n            }, 3000);\r\n          })\r\n          .catch(err => {\r\n            console.log(err);\r\n            setMessage(`${newName} has already been deleted from server`);\r\n            setMessageStyle(errorStyle);\r\n            setTimeout(() => {\r\n              setMessage(null);\r\n            }, 3000);\r\n            setPersons(persons.filter(person => person.name !== newName));\r\n            clearFields();\r\n          });\r\n        return;\r\n      } else {\r\n        clearFields();\r\n        return;\r\n      }\r\n    }\r\n\r\n    personService\r\n      .create(newPerson)\r\n      .then(res => {\r\n        if (res.status === 201) {\r\n          setPersons(persons.concat(res.data));\r\n          clearFields();\r\n          setMessage(`Added ${newName} to the phonebook`);\r\n          setMessageStyle(successStyle);\r\n          setTimeout(() => {\r\n            setMessage(null);\r\n          }, 3000);\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n        setMessage('Something went wrong');\r\n        setMessageStyle(errorStyle);\r\n        setTimeout(() => {\r\n          setMessage(null);\r\n        }, 3000);\r\n      });\r\n  };\r\n\r\n  const removePerson = e => {\r\n    const id = e.target.value;\r\n    if (window.confirm('Do you really want to delete this person?')) {\r\n      personService\r\n        .remove(id)\r\n        .then(res => {\r\n          if (res.status === 204) {\r\n            personService.getAll().then(res => {\r\n              setPersons(res.data);\r\n            });\r\n          }\r\n          setMessage(`Person deleted from the phonebook`);\r\n          setMessageStyle(successStyle);\r\n          setTimeout(() => {\r\n            setMessage(null);\r\n          }, 3000);\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n          setMessage('This person has already been deleted');\r\n          setMessageStyle(errorStyle);\r\n          setTimeout(() => {\r\n            setMessage(null);\r\n          }, 3000);\r\n          personService.getAll().then(res => {\r\n            setPersons(res.data);\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message} messageStyle={messageStyle} />\r\n      <Filterform handleFilterChange={handleFilterChange} filter={filter} />\r\n      <NewPersonForm\r\n        addPerson={addPerson}\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        handleNameChange={handleNameChange}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n      <Personlist\r\n        persons={persons}\r\n        filter={filter}\r\n        filteredPersons={filteredPersons}\r\n        setPersons={setPersons}\r\n        removePerson={removePerson}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}