(window.webpackJsonppuhelinluettelo=window.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},20:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(13),u=n.n(o),c=(n(20),n(14)),l=n(2),i=function(e){var t=e.handleFilterChange,n=e.filter;return a.a.createElement("div",null,"Filter by name: ",a.a.createElement("input",{onChange:t,value:n}))},s=function(e){var t=e.addPerson,n=e.newName,r=e.newNumber,o=e.handleNameChange,u=e.handleNumberChange;return a.a.createElement("div",null,a.a.createElement("h3",null,"Add new"),a.a.createElement("form",{onSubmit:t},a.a.createElement("div",null,"Name: ",a.a.createElement("input",{onChange:o,value:n,required:!0}),a.a.createElement("br",null),"Number:"," ",a.a.createElement("input",{onChange:u,value:r,required:!0})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"Add"))))},d=function(e){var t=e.person,n=e.removePerson;return a.a.createElement("div",null,t.name," ",t.number," ",a.a.createElement("button",{onClick:n,value:t.id},"Delete"))},m=function(e){var t=e.persons,n=e.filter,r=e.filteredPersons,o=e.removePerson;return a.a.createElement("div",null,a.a.createElement("h3",null,"Numbers"),a.a.createElement("div",null,n?r.map((function(e){return a.a.createElement(d,{key:e.id,person:e,removePerson:o})})):t.map((function(e){return a.a.createElement(d,{key:e.id,person:e,removePerson:o})}))))},f=function(e){var t=e.message,n=e.messageStyle;return null===t?null:a.a.createElement("div",{style:n},t)},b=n(3),p=n.n(b),h="/api/persons/",v=function(){return p.a.get(h)},g=function(e){return p.a.post(h,e)},O=function(e,t){return p.a.put("".concat(h).concat(e),t)},E=function(e){return p.a.delete("".concat(h).concat(e))};function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var j=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],o=t[1],u=Object(r.useState)(""),d=Object(l.a)(u,2),b=d[0],p=d[1],h=Object(r.useState)([]),j=Object(l.a)(h,2),w=j[0],P=j[1],S=Object(r.useState)(""),C=Object(l.a)(S,2),k=C[0],N=C[1],D=Object(r.useState)(""),T=Object(l.a)(D,2),A=T[0],B=T[1],F=Object(r.useState)(""),R=Object(l.a)(F,2),q=R[0],x=R[1],z=Object(r.useState)({}),J=Object(l.a)(z,2),L=J[0],I=J[1],U={color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10},G={color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};Object(r.useEffect)((function(){v().then((function(e){o(e.data)})).catch((function(e){return console.log(e)}))}),[]),Object(r.useEffect)((function(){P(n.filter((function(e){return e.name.toLowerCase().includes(b.toLowerCase())})))}),[b,n]);var H=function(){N(""),B("")};return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(f,{message:q,messageStyle:L}),a.a.createElement(i,{handleFilterChange:function(e){p(e.target.value)},filter:b}),a.a.createElement(s,{addPerson:function(e){e.preventDefault();var t={name:k,number:A};if(n.map((function(e){return e.name})).includes(k)){var r=n.find((function(e){return e.name===k})),a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{number:A});return window.confirm("".concat(k," already exists. Replace the old number with a new one?"))?void O(r.id,a).then((function(e){o(n.map((function(t){return t.id!==r.id?t:e.data}))),H(),x("Updated the number of ".concat(k," to ").concat(A)),I(G),setTimeout((function(){x(null)}),5e3)})).catch((function(e){console.log(e),x("".concat(k," has already been deleted from server")),I(U),setTimeout((function(){x(null)}),5e3),o(n.filter((function(e){return e.name!==k}))),H()})):void H()}g(t).then((function(e){201===e.status&&(o(n.concat(e.data)),H(),x("Added ".concat(k," to the phonebook")),I(G),setTimeout((function(){x(null)}),5e3))})).catch((function(e){console.log(e),x(e.response.data.error),I(U),setTimeout((function(){x(null)}),5e3),H()}))},newName:k,newNumber:A,handleNameChange:function(e){N(e.target.value)},handleNumberChange:function(e){B(e.target.value)}}),a.a.createElement(m,{persons:n,filter:b,filteredPersons:w,setPersons:o,removePerson:function(e){var t=e.target.value;window.confirm("Do you really want to delete this person?")&&E(t).then((function(e){204===e.status&&v().then((function(e){o(e.data)})),x("Person deleted from the phonebook"),I(G),setTimeout((function(){x(null)}),5e3)})).catch((function(e){console.log(e),x("This person has already been deleted"),I(U),setTimeout((function(){x(null)}),5e3),v().then((function(e){o(e.data)}))}))}}))};u.a.render(a.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.34dadc01.chunk.js.map